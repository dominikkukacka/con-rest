<!-- con-rest -->
<!-- Version: 0.0.1 -->
<!-- -->
<!-- Author: Andy Tang -->
<!-- Fork me on Github: https://github.com/EnoF/con-rest -->
<section class="rest-call"
         layout="row">
  <md-card ng-if="!editing" layout="row">
    <section layout="column">
    <section layout="rows"
             class="edit-rest-call"
             ng-click="startEditing()">
      <h2 flex="60">{{ request.name }}
        <md-icon icon="/icons/ic_edit_18px.svg"></md-icon>
      </h2>
    </section>
    <md-content layout-wrap layout="rows">
      <md-item flex="80">
        <h4>url</h4>

        <p>{{ request.url }}</p>
      </md-item>
      <md-item>
        <h4>method</h4>

        <p>{{ request.method }}</p>
      </md-item>
      <md-item flex="80">
        <h4>data</h4>
        <pre>{{ request.data | json }}</pre>
      </md-item>
      <md-item>
        <h4>type</h4>
        <pre>{{ request.type || 'empty' }}</pre>
      </md-item>
      <md-item flex="90">
        <h4>headers</h4>
        <pre>{{ request.headers | json }}</pre>
      </md-item>
      <md-item flex="90">
        <h4>files</h4>
        <div data-ng-repeat="file in request.files">
          {{ file.name }} <img data-ng-src="/api/files/{{ file.file }}" height="40" /><br />
        </div>
      </md-item>
    </md-content>
    </section>
    <section layout="column"
             ng-if="isExecutable">
      <md-button class="md-fab"
                 ng-click="executeRestCall(request)"
                 aria-label="execute workflow">
        <md-icon icon="/icons/ic_arrow_forward_24px.svg"></md-icon>
      </md-button>
      <md-button class="md-fab"
                 ng-click="confirmRestCallDeletion($event, request)"
                 aria-label="delete rest call">
        <md-icon icon="/icons/ic_delete_24px.svg"></md-icon>
      </md-button>
      <md-icon icon="/icons/ic_done_24px.svg" ng-if="request.success === true"></md-icon>
      <md-icon icon="/icons/ic_error_24px.svg" ng-if="request.success === false"></md-icon>
    </section>
  </md-card>
  <call-registrator ng-if="editing"
                    rest-call="request">
  </call-registrator>
</section>
